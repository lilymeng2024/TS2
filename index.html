<!DOCTYPE html>
<html>
    <head>
        <title>MA Study 2</title>
        <meta name="author" content="Yimeng Han"/>
        <meta name="description" content="hopelessness manipulation using WEPT"/>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
        <script src="jspsych/jspsych.js"></script>
        <script src="jspsych/plugin-survey-multi-select.js"></script>
        <script src="jspsych/plugin-survey-multi-choice.js"></script>
        <script src="jspsych/plugin-survey-text.js"></script>
        <script src="jspsych/plugin-call-function.js"></script>
        <script src="jspsych/plugin-preload.js"></script>
        <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
        <link href="forms/image/favicon.ico" rel="icon" type="image/x-icon"
    </head>
    <body></body>

    <!-- enter some javascript code-->
    <script>
        //initialize jspsych
        var jsPsych = initJsPsych({
            on_finish:function(){
                jsPsych.data.displayData();
            }
        });

        //preload
        var preload={
            type:jsPsychPreload,
            images:['forms/image/matrix.png']
        };

        //Intro
        var introduction={
            type:jsPsychSurveyText,
            questions:[
                {prompt: `
                <div style="max-width: 850px; margin: auto; text-align: left; line-height: 1.6;">
                <p>You will now continue with the number-identification task for a little longer.</p>
                <p>In this section, you and your partner will engage in a joint decision-making task. 
                Very often people are faced with decisions to make that could help a giving cause, 
                but it will only be beneficial if their effort is matched by other people's effort too. 
                Yet no one wants their effort to be wasted.</p>
                <p>You and your partner will complete <b>15 rounds</b> of the number-identification task.
                There will be <b>20 numbers</b> to check in each round, and you will be given <b>30 seconds</b>. Prior to each round, 
                you and your partner can choose between two versions of the task or skip : </p>
                <p><b>1) Hard version</b>: Identify numbers with an even first digit and an odd second digit. <br>
                <b>2) Easy version</b>: Identify numbers with any first digit and any second digit. <br>
                <b>3) Skip</b>: Be directed to start of the next round. </p>
                <p> Your and your teammate's decisions will generate donations from the research team to <b>Tree Canada</b>.
                Tree Canada is a national non-profit organization dedicated to planting and nurturing trees in rural and urban environments across Canada. 
                <b>The amount of donation depends on you and your teammate's choice and effort together</b>. 
                In every round, if you and your partner both complete the hard version and pass the 90% accuracy check, the donation will be <b>0.5 CAD</b>. 
                If one of you completes the hard version and the other the easy version, the donation will be <b>0.1 CAD</b>. 
                If neither participant completes the hard version, there will be <b>no donation</b> made. You can also refer to the picture below to learn about how the amount of donation is decided. </p>
                <div style="text-align:center;margin-top:20px;">
                    <image src="forms/image/matrix.png" style="width:400px;height=auto:">
                </div>
                <p>We know you and your partner care about making the environment better and 
                are willing to put in the effort to support environmental NGOs like Tree Canada. Your actions can directly contribute to this cause. 
                It is up to you to choose a hard or easy version, and you also have the option to discontinue at any time or move to the next round. 
                <p>If you are ready for the actual task, please fill in your participant ID and proceed to the next page.</p>
                </div>
                `}
            ]
        };

        //trial_1 branching
        var pre_trial1={
            type:jsPsychSurveyMultiChoice,
            questions:[{
                prompt:"You can choose to complete the hard or easy version, and choose to skip this task.",
                name:"pre_trial1",
                options:['Hard','Easy','Skip'],
                required:true
            }],
        };
    
        var trial_1 = {
            type:jsPsychSurveyMultiSelect,
            questions:[{
                prompt:" ",
                options:["34","46","31","89","17","52","46","31","42","89"],
                horizontal:true,
                required:false,
                name:"T1_L1"
            },{
                prompt:" ",
                options:["27","44","65","38","53","67","85","85","66","71"],
                horizontal:true,
                required:false,
                name:"T1_L2"
            }],
            trial_duration:10000,
        };

        //show trial 1 only if "Hard" or Easy is chosen
        var conditional_trial1 = {
            timeline:[trial_1],
            conditional_function:function(){
                var lastResp = jsPsych.data.get().last(1).values()[0].response;
                var choice = lastResp.pre_trial1;
                return choice === "Hard"||choice === "Easy";
            }
        };
        
        //trial_2 branching
        var pre_trial2={
            type:jsPsychSurveyMultiChoice,
            questions:[{
                prompt:"You can choose to complete the hard or easy version, and choose to skip this task.",
                name:"pre_trial2",
                options:['Hard','Easy','Skip'],
                required:true
        }],
        };
    
        var trial_2 = {
            type:jsPsychSurveyMultiSelect,
            questions:[{
                prompt:" ",
                options:["47","72","39","59","15","84","88","82","44","57"],
                horizontal:true,
                required:false,
                name:"T2_L1"
            },{
                prompt:" ",
                options:["59","38","68","46","32","81","67","71","69","84"],
                horizontal:true,
                required:false,
                name:"T2_L2"
            }],
            trial_duration:10000
        };

        //show trial 2 only if "Hard" or Easy is chosen
        var conditional_trial2 = {
            timeline:[trial_2],
            conditional_function:function(){
                var lastResp = jsPsych.data.get().last(1).values()[0].response;
                var choice = lastResp.pre_trial2;
                return choice === "Hard"||choice === "Easy";
            }
        };
         /*create timelime*/
        var timeline = [];
        timeline.push(preload);
        timeline.push(introduction);
        timeline.push(pre_trial1);
        timeline.push(conditional_trial1);
        timeline.push(pre_trial2);
        timeline.push(conditional_trial2);

        jsPsych.run(timeline);
    </script>
</html>